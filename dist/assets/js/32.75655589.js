(this.webpackJsonp=this.webpackJsonp||[]).push([[32],{553:function(a,s,t){a.exports=t.p+"assets/img/2.fc1d4be7.jpg"},633:function(a,s,t){"use strict";t.r(s);var e=t(1),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"ftp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ftp","aria-hidden":"true"}},[a._v("#")]),a._v(" ftp")]),a._v(" "),e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍","aria-hidden":"true"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),e("p",[a._v("FTP 是 TCP/IP 协议组中的协议之一，是英文File Transfer Protocol的缩写。该协议是Internet文件传送的基础，它由一系列规格说明文档组成，目标是提高文件的共享性，提供非直接使用远程计算机，使存储介质对用户透明和可靠高效地传送数据。简单的说，FTP就是完成两台计算机之间的拷贝，从远程服务器拷贝文件至自己的计算机上，自己计算机上传文件到服务器上。")]),a._v(" "),e("h2",{attrs:{id:"安装指引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装指引","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装指引")]),a._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://yq.aliyun.com/articles/708809?spm=a2c4e.11153940.0.0.44361837SlIMUI",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考阿里云"),e("OutboundLink")],1)])]),a._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://cloud.tencent.com/developer/labs/gallery?category=env_build",target:"_blank",rel:"noopener noreferrer"}},[a._v("安装测试"),e("OutboundLink")],1)])]),a._v(" "),e("li",[e("p",[a._v("安装并启动FTP服务")])])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("yum install vsftpd "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("y\n")])])]),e("ul",[e("li",[a._v("安装完成后，启动 FTP 服务")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("service vsftpd "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("start")]),a._v("\n")])])]),e("ul",[e("li",[a._v("启动后，可以看到系统已经监听了21端口（FTP 协议默认使用 21 端口作为服务端口）")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("netstat "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("nltp "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),a._v(" grep 21\n")])])]),e("blockquote",[e("p",[a._v("此时，访问 "),e("code",[a._v("ftp://你的IP地址")]),a._v("，可以浏览机器上的"),e("code",[a._v("/var/ftp")]),a._v("目录了, 默认开启匿名"),e("code",[a._v("anonymous")]),a._v("访问模式。默认访问目录"),e("code",[a._v("/data/ftp/pub")]),a._v(",且只有只读权限")])]),a._v(" "),e("h2",{attrs:{id:"配置ftp权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置ftp权限","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置FTP权限")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),e("p",[a._v("vsftpd 的配置目录为 "),e("code",[a._v("/etc/vsftpd")]),a._v("，包含下列的配置文件："),e("br"),a._v(" "),e("code",[a._v("vsftpd.conf")]),a._v(" 为主要配置文件"),e("br"),a._v(" "),e("code",[a._v("ftpusers")]),a._v(" 配置禁止访问 FTP 服务器的用户列表"),e("br"),a._v(" "),e("code",[a._v("user_list")]),a._v(" 配置用户访问控制,阻止匿名访问和切换根目录"),e("br"),a._v("\n匿名访问和切换根目录都会给服务器带来安全风险，我们把这两个功能关闭")])]),a._v(" "),e("ul",[e("li",[a._v("编辑 "),e("code",[a._v("/etc/vsftpd/vsftpd.conf")]),a._v("，找到下面两处配置并修改")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("vim "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("vsftpd"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("vsftpd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("conf\n")])])]),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 禁用匿名用户，默认YES，改为NO")]),a._v("\nanonymous_enable"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NO")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 禁止切换根目录，默认是注释的，把前面的注释符#去掉")]),a._v("\nchroot_local_user"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token constant"}},[a._v("YES")]),a._v("\n")])])]),e("ul",[e("li",[a._v("保存后，重启一下FTP")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("service vsftpd restart\n")])])]),e("ul",[e("li",[a._v("创建 FTP 用户, 例如创建一个用户名叫做admin的用户")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("useradd admin\n")])])]),e("ul",[e("li",[a._v("为用户 admin 设置密码")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"admin123"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),a._v(" passwd admin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("stdin\n")])])]),e("ul",[e("li",[a._v("限制用户 admin 只能通过 FTP 访问服务器，而不能直接登录服务器")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("usermod "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("s "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("sbin"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("nologin admin\n")])])]),e("ul",[e("li",[a._v("为用户分配主目录并设置权限, "),e("code",[a._v("/workspace/ftp")]),a._v(" 为主目录, 该目录不可上传文件"),e("code",[a._v("/workspace/ftp/pub")]),a._v(" 文件只能上传到该目录下,前提是这些目录都要存在")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("chmod a"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("w "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("workspace"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("ftp && chmod 777 "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("R "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("workspace"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("ftp"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("pub\n")])])]),e("ul",[e("li",[a._v("设置用户admin的主目录, 用户的主目录是用户通过 FTP 登录后看到的根目录")])]),a._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[a._v("usermod "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("d "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("workspace"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("ftp admin\n")])])]),e("h2",{attrs:{id:"可视化ftp工具-filezilla-下载地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可视化ftp工具-filezilla-下载地址","aria-hidden":"true"}},[a._v("#")]),a._v(" 可视化FTP工具(FileZilla)"),e("a",{attrs:{href:"https://www.filezilla.cn/download/client",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载地址"),e("OutboundLink")],1)]),a._v(" "),e("ul",[e("li",[e("p",[a._v("使用客户端连接服务器，实现本机与服务器之间文件上传下载")])]),a._v(" "),e("li",[e("p",[e("img",{attrs:{src:t(553),alt:"2.jpg"}})])])]),a._v(" "),e("ClientOnly",[e("global-reward-index")],1)],1)}),[],!1,null,null,null);s.default=r.exports}}]);