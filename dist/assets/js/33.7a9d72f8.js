(this.webpackJsonp=this.webpackJsonp||[]).push([[33],{558:function(t,s,a){t.exports=a.p+"assets/img/3.e022a3dd.jpg"},640:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"https-ssl证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#https-ssl证书","aria-hidden":"true"}},[t._v("#")]),t._v(" https-ssl证书")]),t._v(" "),n("h2",{attrs:{id:"介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("超文本传输协议HTTP协议被用于在Web浏览器和网站服务器之间传递信息，HTTP协议以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此，HTTP协议不适合传输一些敏感信息，比如：信用卡号、密码等支付信息。")])]),t._v(" "),n("li",[n("p",[t._v("为了解决HTTP协议的这一缺陷，需要使用另一种协议：安全套接字层超文本传输协议HTTPS，为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL/TLS协议，SSL/TLS依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。")])]),t._v(" "),n("li",[n("p",[t._v("HTTPS协议是由SSL/TLS+HTTP协议构建的可进行加密传输、身份认证的网络协议，要比http协议安全")])]),t._v(" "),n("li",[n("p",[t._v("HTTPS协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。")])])]),t._v(" "),n("h2",{attrs:{id:"https和http的主要区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#https和http的主要区别","aria-hidden":"true"}},[t._v("#")]),t._v(" https和http的主要区别")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("https协议需要到CA申请证书。")])]),t._v(" "),n("li",[n("p",[t._v("http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl/tls加密传输协议。")])]),t._v(" "),n("li",[n("p",[t._v("http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。")])]),t._v(" "),n("li",[n("p",[t._v("http的连接很简单，是无状态的；HTTPS协议是由SSL/TLS+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。")])])]),t._v(" "),n("h2",{attrs:{id:"https申请"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#https申请","aria-hidden":"true"}},[t._v("#")]),t._v(" https申请")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://console.cloud.tencent.com/ssl",target:"_blank",rel:"noopener noreferrer"}},[t._v("腾讯云证书申请"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://yundun.console.aliyun.com/?spm=5176.12818093.recent.dcas.488716d0XOoPNV&p=cas#/overview/cn-hangzhou",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云证书申请"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("说明 SSL证书有免费型和付费型")]),t._v(" "),n("ul",[n("li",[t._v("免费SSL证书只有域名验证性型（DV SSL证书）")]),t._v(" "),n("li",[t._v("而付费SSL证书有域名验证型（DV SSL证书）、企业验证型（OV SSL证书）、组织验证型（EV SSL证书）")]),t._v(" "),n("li",[t._v("总的来说，免费的SSL证书，适用于个人博客，作为一个临时的解决方案。企业或流量较高的个人网站还是选择付费的SSL证书比较好")])])]),t._v(" "),n("p",[t._v("在阿里云或者腾讯云申请成功之后，一般10分钟之内就会下发SSL证书")]),t._v(" "),n("h2",{attrs:{id:"ssl之nginx配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssl之nginx配置","aria-hidden":"true"}},[t._v("#")]),t._v(" SSL之Nginx配置")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35244",target:"_blank",rel:"noopener noreferrer"}},[t._v("腾讯云Nginx 服务器证书安装配置文档"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://help.aliyun.com/document_detail/98728.html?spm=5176.2020520163.0.0.657156a7ydTEHF",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云Nginx 服务器证书安装配置文档"),n("OutboundLink")],1)]),t._v(" "),n("ol",[n("li",[t._v("这里以腾讯云SSL证书申请为例子，在下发SSL证书之后，下载证书文件压缩包，解压之后会得到以下文件夹")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(558),alt:"img"}})]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[t._v("进入Nginx文件夹，里面包含 "),n("code",[t._v("1_www.dxf5566.cn_bundle.crt")]),t._v(" 证书和 "),n("code",[t._v("2_www.dxf5566.cn.key")]),t._v(" 私钥两个文件")])]),t._v(" "),n("li",[n("p",[t._v("将这两个文件拷贝到你的服务器 "),n("code",[t._v("/etc/nginx")]),t._v(" 目录中")])])]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("scp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Users"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("duanxiongfei"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Downloads"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("1_www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn_bundle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("crt root@148"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("70"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("147"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("90:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将证书文件上传到服务器")]),t._v("\nscp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Users"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("duanxiongfei"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Downloads"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("2_www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key root@148"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("70"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("147"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("90:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将私钥文件上传到服务器")]),t._v("\n")])])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("远程进入服务器，进入 "),n("code",[t._v("/etc/nginx/conf.d")]),t._v(" 目录中, 编辑 "),n("code",[t._v("default.conf")])])]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("cd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d\nvim default"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf\n")])])]),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen 443"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#填写绑定证书的域名")]),t._v("\n    ssl on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#网站主页路径。此路径仅供参考，具体请您按照实际目录操作。")]),t._v("\n    ssl_certificate  1_www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn_bundle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("crt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#证书文件名称，就是在上一步上传到 /etc/nginx 目录中的证书文件")]),t._v("\n    ssl_certificate_key 2_www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#私钥文件名称")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#请按照这个协议配置")]),t._v("\n    ssl_protocols TLSv1 TLSv1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("1 TLSv1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_session_timeout 5m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#请按照这个套件配置，配置加密套件，写法遵循 openssl 标准。")]),t._v("\n    ssl_ciphers ECDHE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("RSA"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AES128"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("GCM"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("SHA256:ECDHE:ECDH:AES:HIGH:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("NULL:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("aNULL:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("MD5:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ADH:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("RC4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_prefer_server_ciphers on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#下面这个是你网站首页的路径，根据自己的路径配置")]),t._v("\n    location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        root   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("workspace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ftp"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pub"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("notes"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        autoindex on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen 80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#填写绑定证书的域名")]),t._v("\n    server_name www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dxf5566"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#把http的域名请求转成https, http 自动跳转 https")]),t._v("\n    rewrite ^"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ https:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ol",{attrs:{start:"5"}},[n("li",[t._v("通过执行以下命令验证配置文件问题")])]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("nginx "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("t\n")])])]),n("ol",{attrs:{start:"6"}},[n("li",[t._v("重启nginx, 即可使用 "),n("code",[t._v("https://www.dxf5566.cn/")]),t._v(" 访问你的网站")])]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("systemctl restart nginx\n")])])]),n("ClientOnly",[n("global-reward-index")],1)],1)}),[],!1,null,null,null);s.default=e.exports}}]);